<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>NOVA – Your Purpose Reveal</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #f7fafc;
      color: #102a43;
      margin: 0;
      padding: 24px;
    }
    .container {
      max-width: 960px;
      margin: 0 auto;
      background: #ffffff;
      border-radius: 12px;
      padding: 24px 28px 28px;
      box-shadow: 0 16px 40px rgba(15, 23, 42, 0.08);
    }
    h1 {
      margin-top: 0;
      color: #044e54;
      font-size: 26px;
    }
    p {
      line-height: 1.6;
    }
    .meta {
      font-size: 14px;
      color: #7b8794;
    }
    .section {
      margin-top: 20px;
      margin-bottom: 18px;
    }
    .section h2 {
      font-size: 18px;
      margin: 0 0 6px;
      color: #035c64;
    }
    .pill-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 6px;
    }
    .pill {
      padding: 6px 12px;
      border-radius: 999px;
      background: #e0f7f9;
      color: #035c64;
      font-size: 13px;
    }
    .role-title {
      font-size: 19px;
      font-weight: 600;
      color: #102a43;
    }
    .role-meta {
      font-size: 14px;
      color: #52606d;
      margin-top: 4px;
    }
    .purpose-block {
      border-left: 4px solid #14b5d0;
      padding-left: 12px;
      margin-bottom: 12px;
    }
    .purpose-block strong {
      display: block;
      margin-bottom: 4px;
      color: #035c64;
    }
    .btn-row {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      margin-top: 24px;
    }
    .btn {
      border: none;
      border-radius: 999px;
      padding: 10px 18px;
      font-size: 15px;
      cursor: pointer;
    }
    .btn-primary {
      background: #14b5d0;
      color: #ffffff;
    }
    .btn-secondary {
      background: #e4f0f5;
      color: #035c64;
    }
    .note {
      font-size: 12px;
      color: #7b8794;
      margin-top: 4px;
    }
    @media (max-width: 640px) {
      .container {
        padding: 18px 16px 20px;
      }
      .btn-row {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Your NOVA Purpose Reveal</h1>
    <p class="meta">
      NOVA has identified the categories, traits, and role that fit how you are wired. This snapshot will be handed to NAVI to help build your resume and career strategy.
    </p>

    <!-- CATEGORIES -->
    <div class="section">
      <h2>Categories You Selected</h2>
      <div id="categoriesPills" class="pill-row">
        <!-- Example placeholders – your existing JS can overwrite these values -->
        <span class="pill" data-category>Business &amp; Operations</span>
        <span class="pill" data-category>Technology &amp; Systems</span>
      </div>
    </div>

    <!-- TRAITS -->
    <div class="section">
      <h2>Your Top Traits</h2>
      <div id="traitsPills" class="pill-row">
        <!-- Example placeholders – your existing JS can overwrite these values -->
        <span class="pill" data-trait>Strategic Thinker</span>
        <span class="pill" data-trait>Process Optimizer</span>
        <span class="pill" data-trait>People-Centered Leader</span>
      </div>
    </div>

    <!-- ROLE -->
    <div class="section">
      <h2>Recommended Role</h2>
      <p class="role-title" id="roleTitle" data-role-title>
        Operations &amp; Process Improvement Lead
      </p>
      <p class="role-meta">
        <span id="roleSoc" data-role-soc>SOC 11-3051</span> ·
        <span id="roleSalary" data-role-salary>$95,000–$145,000</span> ·
        <span id="roleOutlook" data-role-outlook>Faster than average growth</span>
      </p>
      <p id="roleSummary" data-role-summary>
        You specialize in untangling complex workflows, reducing waste, and building systems that help people do their best work.
      </p>
    </div>

    <!-- PURPOSE – 3 SECTIONS -->
    <div class="section">
      <h2>Your Purpose in Three Lenses</h2>

      <div class="purpose-block">
        <strong>Why You</strong>
        <p id="purposeWhyYou" data-purpose-why-you>
          You are wired to see patterns in the chaos, bring order, and protect people’s time and energy.
        </p>
      </div>

      <div class="purpose-block">
        <strong>Why This Role</strong>
        <p id="purposeWhyRole" data-purpose-why-role>
          This role lets you steward operations, improve systems, and amplify impact for teams and organizations.
        </p>
      </div>

      <div class="purpose-block">
        <strong>Why Now</strong>
        <p id="purposeWhyNow" data-purpose-why-now>
          You are at an inflection point where your experience, hunger for purpose, and new opportunities are converging.
        </p>
      </div>
    </div>

    <div class="section">
      <p class="meta">
        NOVA will save this snapshot securely in your browser so NAVI can use it to build your resume and job strategy.
      </p>
    </div>

    <div class="btn-row">
      <button id="investBtn" class="btn btn-primary">
        Invest in Myself and Continue
      </button>
      <button id="backBtn" class="btn btn-secondary" type="button">
        Back
      </button>
    </div>
  </div>

  <script>
    function buildNovaProfile() {
      // 1) Categories
      const categoryEls = document.querySelectorAll('[data-category]');
      const categories = Array.from(categoryEls).map(el => el.textContent.trim());

      // 2) Traits
      const traitEls = document.querySelectorAll('[data-trait]');
      const traits = Array.from(traitEls).map(el => el.textContent.trim());

      // 3) Role
      const role = {
        title: document.querySelector('[data-role-title]')?.textContent?.trim() || '',
        socCode: document.querySelector('[data-role-soc]')?.textContent?.trim() || '',
        salaryRange: document.querySelector('[data-role-salary]')?.textContent?.trim() || '',
        outlook: document.querySelector('[data-role-outlook]')?.textContent?.trim() || '',
        summary: document.querySelector('[data-role-summary]')?.textContent?.trim() || ''
      };

      // 4) Purpose
      const purpose = {
        whyYou: document.querySelector('[data-purpose-why-you]')?.textContent?.trim() || '',
        whyThisRole: document.querySelector('[data-purpose-why-role]')?.textContent?.trim() || '',
        whyNow: document.querySelector('[data-purpose-why-now]')?.textContent?.trim() || ''
      };

      return {
        version: "1.0",
        createdAt: new Date().toISOString(),
        categories,
        traits,
        role,
        purpose
      };
    }

    function saveNovaProfileToStorage() {
      const profile = buildNovaProfile();
      try {
        localStorage.setItem('novaProfile', JSON.stringify(profile));
        console.log('Nova profile saved for NAVI:', profile);
        return true;
      } catch (err) {
        console.error('Error saving novaProfile to localStorage', err);
        alert('There was a problem saving your NOVA snapshot on this browser.');
        return false;
      }
    }

    document.getElementById('investBtn').addEventListener('click', function () {
      const ok = saveNovaProfileToStorage();
      if (ok) {
        window.location.href = 'invest.html';
      }
    });

    document.getElementById('backBtn').addEventListener('click', function () {
      window.history.back();
    });
  </script>
</body>
</html>
