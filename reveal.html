<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Your NOVA Purpose Reveal</title>

  <style>
    :root {
      --nova-bg: #f9fafb;
      --nova-card-bg: #ffffff;
      --nova-teal: #14b8a6;
      --nova-teal-dark: #0f766e;
      --nova-text-main: #111827;
      --nova-text-muted: #6b7280;
      --nova-border: #e5e7eb;
      --nova-radius-lg: 22px;
      --nova-shadow-soft: 0 24px 60px rgba(15,118,110,0.10);
      --badge-blue: #2563eb;
      --badge-green: #16a34a;
      --badge-amber: #d97706;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: system-ui, -apple-system, "Segoe UI", sans-serif;
      min-height: 100vh;
      background: radial-gradient(circle at top left,#ecfeff 0,#f9fafb 45%,#f9fafb 100%);
      color: var(--nova-text-main);
    }

    main.reveal-page {
      max-width: 1100px;
      margin: 36px auto 48px;
      padding: 0 16px 56px;
    }

    @media (min-width: 768px) {
      main.reveal-page {
        margin-top: 48px;
      }
    }

    .reveal-header {
      margin-bottom: 28px;
    }

    .reveal-step {
      font-size: 0.9rem;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      font-weight: 600;
      color: var(--nova-teal);
      margin-bottom: 6px;
    }

    .reveal-title {
      font-size: clamp(1.9rem, 3vw, 2.4rem);
      font-weight: 700;
      margin-bottom: 10px;
    }

    .reveal-subtitle {
      max-width: 720px;
      font-size: 0.98rem;
      color: var(--nova-text-muted);
      line-height: 1.5;
    }

    .reveal-section {
      background: var(--nova-card-bg);
      border-radius: var(--nova-radius-lg);
      border: 1px solid var(--nova-border);
      box-shadow: var(--nova-shadow-soft);
      padding: 18px 20px 20px;
      margin-top: 20px;
    }

    .reveal-section h2 {
      font-size: 1.05rem;
      font-weight: 700;
      margin-bottom: 10px;
    }

    .pill-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 6px;
    }

    .pill {
      padding: 4px 10px;
      border-radius: 999px;
      background: #ecfeff;
      border: 1px solid rgba(20,184,166,0.35);
      font-size: 0.82rem;
      color: var(--nova-teal-dark);
      font-weight: 500;
    }

    .role-title {
      font-size: 1.05rem;
      font-weight: 700;
      margin-bottom: 4px;
    }

    .role-meta {
      font-size: 0.86rem;
      color: var(--nova-text-muted);
      margin-bottom: 8px;
    }

    .role-summary {
      font-size: 0.9rem;
      color: var(--nova-text-main);
      line-height: 1.5;
    }

    .purpose-lenses {
      display: grid;
      grid-template-columns: 1fr;
      gap: 12px;
      margin-top: 8px;
    }

    @media (min-width: 768px) {
      .purpose-lenses {
        grid-template-columns: repeat(3, minmax(0, 1fr));
      }
    }

    .purpose-card {
      border-radius: 16px;
      border: 1px solid var(--nova-border);
      background: #f9fafb;
      padding: 12px 14px;
      font-size: 0.9rem;
      line-height: 1.5;
    }

    .purpose-card h3 {
      font-size: 0.86rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--nova-teal-dark);
      margin-bottom: 6px;
    }

    .reveal-actions {
      margin-top: 28px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      align-items: center;
      justify-content: center;
    }

    @media (min-width: 640px) {
      .reveal-actions {
        flex-direction: row;
        justify-content: space-between;
      }
    }

    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      border-radius: 999px;
      padding: 10px 22px;
      font-size: 0.95rem;
      font-weight: 600;
      text-decoration: none;
      cursor: pointer;
      border: none;
      transition: 0.18s ease;
      gap: 8px;
    }

    .btn-outline {
      background: transparent;
      color: var(--nova-text-main);
      border: 1px solid var(--nova-border);
    }

    .btn-outline:hover {
      background: #ffffff;
      box-shadow: 0 10px 25px rgba(15,23,42,0.08);
      transform: translateY(-1px);
    }

    .btn-primary {
      background: var(--nova-teal);
      color: #ffffff;
      box-shadow: 0 16px 32px rgba(20,184,166,0.45);
    }

    .btn-primary:hover {
      background: var(--nova-teal-dark);
      box-shadow: 0 18px 36px rgba(15,118,110,0.5);
      transform: translateY(-1px);
    }

    .chevron-left,
    .chevron-right {
      font-size: 1.1rem;
      line-height: 0;
    }

    .empty-text {
      font-size: 0.88rem;
      color: var(--nova-text-muted);
    }
  </style>
</head>

<body>
  <main class="reveal-page">
    <header class="reveal-header">
      <div class="reveal-step">Your NOVA Purpose Reveal</div>
      <h1 class="reveal-title">Here’s the profile NOVA has identified.</h1>
      <p class="reveal-subtitle">
        NOVA has identified the categories, traits, and role that fit how you are wired.
        This is your starting point for building a clear, purpose-aligned career strategy.
      </p>
    </header>

    <section class="reveal-section" id="categoriesSection">
      <h2>Categories You Selected</h2>
      <div id="categoriesContent" class="pill-row"></div>
    </section>

    <section class="reveal-section" id="traitsSection">
      <h2>Your Top Traits</h2>
      <div id="traitsContent" class="pill-row"></div>
    </section>

    <section class="reveal-section" id="roleSection">
      <h2>Recommended Role</h2>
      <div id="roleContent"></div>
    </section>

    <section class="reveal-section">
      <h2>Your Purpose in Three Lenses</h2>
      <div class="purpose-lenses">
        <div class="purpose-card">
          <h3>Why You</h3>
          <p id="whyYouText"></p>
        </div>
        <div class="purpose-card">
          <h3>Why This Role</h3>
          <p id="whyRoleText"></p>
        </div>
        <div class="purpose-card">
          <h3>Why Now</h3>
          <p id="whyNowText"></p>
        </div>
      </div>
    </section>

    <nav class="reveal-actions" aria-label="Reveal navigation">
      <a href="roles.html" class="btn btn-outline">
        <span class="chevron-left">‹</span>
        <span>Back to Roles</span>
      </a>

      <button id="continueRevealBtn" class="btn btn-primary" type="button">
        <span>Continue – Invest in Yourself</span>
        <span class="chevron-right">›</span>
      </button>
    </nav>
  </main>

  <script src="nova-profile-helper.js"></script>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const profile = loadNovaProfile();

      // ----- Categories -----
      const categoriesContainer = document.getElementById("categoriesContent");
      if (profile.categories && profile.categories.length) {
        profile.categories.forEach(cat => {
          const pill = document.createElement("span");
          pill.className = "pill";
          pill.textContent = cat.name || "Category";
          categoriesContainer.appendChild(pill);
        });
      } else {
        const span = document.createElement("span");
        span.className = "empty-text";
        span.textContent = "No data found. Try restarting NOVA.";
        categoriesContainer.appendChild(span);
      }

      // ----- Traits -----
      const traitsContainer = document.getElementById("traitsContent");
      if (profile.traits && profile.traits.length) {
        profile.traits.forEach(name => {
          const pill = document.createElement("span");
          pill.className = "pill";
          pill.textContent = name;
          traitsContainer.appendChild(pill);
        });
      } else {
        const span = document.createElement("span");
        span.className = "empty-text";
        span.textContent = "No traits found yet.";
        traitsContainer.appendChild(span);
      }

      // ----- Role -----
      const roleContent = document.getElementById("roleContent");
      const role = profile.role || {};

      if (role.title) {
        const titleEl = document.createElement("div");
        titleEl.className = "role-title";
        titleEl.textContent = role.title;

        const metaEl = document.createElement("div");
        metaEl.className = "role-meta";
        const salary = role.salaryRange || "";
        const outlook = role.outlook || "";
        const pieces = [];
        if (role.socCode) pieces.push(role.socCode);
        if (salary) pieces.push(salary);
        if (outlook) pieces.push(outlook);
        metaEl.textContent = pieces.join(" · ");

        const summaryEl = document.createElement("div");
        summaryEl.className = "role-summary";
        summaryEl.textContent =
          role.summary ||
          "This role aligns with your natural wiring, giving you room to grow and make a meaningful impact.";

        roleContent.appendChild(titleEl);
        if (metaEl.textContent) roleContent.appendChild(metaEl);
        roleContent.appendChild(summaryEl);
      } else {
        const span = document.createElement("span");
        span.className = "empty-text";
        span.textContent = "No role selected yet.";
        roleContent.appendChild(span);
      }

      // ----- Purpose lenses -----
      const traitsText = (profile.traits || []).join(", ");
      const primaryCategory =
        profile.categories && profile.categories.length
          ? profile.categories[0].name
          : "your category";

      const whyYouDefault = traitsText
        ? `You are wired with strengths like ${traitsText}. These show up again and again in how you think, serve, and solve problems.`
        : "You carry a unique mix of strengths, experiences, and perspective that shape how you show up in the world.";

      const whyRoleDefault = role.title
        ? `This role lets you use those strengths in a focused way — stewarding your design in a space that needs what you naturally bring.`
        : "The right role for you will give you room to use your strengths in environments that value what you naturally bring.";

      const whyNowDefault = `You’re at an inflection point. Clarifying your purpose and direction now helps you make wiser choices about where to invest your time, energy, and training in this next season.`;

      const purpose = profile.purpose || {};

      document.getElementById("whyYouText").textContent =
        purpose.whyYou && purpose.whyYou.trim() ? purpose.whyYou : whyYouDefault;

      document.getElementById("whyRoleText").textContent =
        purpose.whyThisRole && purpose.whyThisRole.trim()
          ? purpose.whyThisRole
          : whyRoleDefault;

      document.getElementById("whyNowText").textContent =
        purpose.whyNow && purpose.whyNow.trim()
          ? purpose.whyNow
          : whyNowDefault;

      // ----- Continue -----
      const continueBtn = document.getElementById("continueRevealBtn");
      continueBtn.addEventListener("click", () => {
        // No major changes here yet, but keep profile consistent
        saveNovaProfile(profile);
        window.location.href = "invest.html";
      });
    });
  </script>
</body>
</html>
