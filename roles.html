<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>NOVA – Role Matches</title>

  <style>
    :root {
      --nova-bg: #f9fafb;
      --nova-card-bg: #ffffff;
      --nova-teal: #14b8a6;
      --nova-teal-dark: #0f766e;
      --nova-text-main: #111827;
      --nova-text-muted: #6b7280;
      --nova-border: #e5e7eb;
      --nova-radius-lg: 18px;
      --nova-shadow-soft: 0 20px 50px rgba(15, 118, 110, 0.10);
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: system-ui, -apple-system, "Segoe UI", sans-serif;
      min-height: 100vh;
      background: radial-gradient(circle at top left,#ecfeff 0,#f9fafb 45%,#f9fafb 100%);
      color: var(--nova-text-main);
    }

    main.roles-page {
      max-width: 1100px;
      margin: 36px auto 40px;
      padding: 0 16px 48px;
    }

    @media (min-width: 768px) {
      main.roles-page {
        margin-top: 48px;
      }
    }

    .roles-header {
      text-align: center;
      margin-bottom: 24px;
    }

    .roles-step {
      font-size: 0.9rem;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      font-weight: 600;
      color: var(--nova-teal);
      margin-bottom: 6px;
    }

    .roles-title {
      font-size: clamp(1.9rem, 3vw, 2.4rem);
      font-weight: 700;
      margin-bottom: 8px;
    }

    .roles-subtitle {
      max-width: 640px;
      margin: 0 auto;
      font-size: 0.98rem;
      color: var(--nova-text-muted);
      line-height: 1.5;
    }

    /* Grid of role cards */
    .roles-grid {
      display: grid;
      gap: 18px;
      margin-top: 26px;
    }

    @media (min-width: 768px) {
      .roles-grid {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
    }

    @media (min-width: 1024px) {
      .roles-grid {
        grid-template-columns: repeat(3, minmax(0, 1fr));
      }
    }

    .role-card {
      background: var(--nova-card-bg);
      border-radius: var(--nova-radius-lg);
      border: 1px solid var(--nova-border);
      box-shadow: var(--nova-shadow-soft);
      padding: 16px 16px 18px;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .role-name {
      font-size: 1rem;
      font-weight: 700;
      color: var(--nova-text-main);
    }

    .role-meta {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 4px;
    }

    .role-pill {
      display: inline-flex;
      align-items: center;
      padding: 4px 10px;
      border-radius: 999px;
      font-size: 0.74rem;
      font-weight: 600;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      border: 1px solid rgba(20,184,166,0.25);
      background: rgba(240,253,250,0.95);
      color: var(--nova-teal-dark);
    }

    .role-pill.outlook {
      border-color: rgba(59,130,246,0.25);
      background: #eff6ff;
      color: #1d4ed8;
    }

    .role-summary {
      font-size: 0.86rem;
      color: var(--nova-text-muted);
      line-height: 1.5;
    }

    .role-traits-label {
      font-size: 0.78rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--nova-text-muted);
      margin-top: 6px;
      margin-bottom: 2px;
    }

    .role-traits {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
    }

    .role-trait-chip {
      font-size: 0.72rem;
      padding: 3px 9px;
      border-radius: 999px;
      background: #ecfeff;
      color: var(--nova-teal-dark);
      border: 1px solid rgba(20,184,166,0.25);
    }

    .roles-actions {
      margin-top: 28px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      align-items: center;
      justify-content: center;
    }

    @media (min-width: 640px) {
      .roles-actions {
        flex-direction: row;
        justify-content: space-between;
      }
    }

    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      border-radius: 999px;
      padding: 10px 22px;
      font-size: 0.95rem;
      font-weight: 600;
      text-decoration: none;
      cursor: pointer;
      border: none;
      transition: background 0.18s ease, color 0.18s ease,
                  transform 0.16s ease, box-shadow 0.16s ease;
      gap: 8px;
    }

    .btn-outline {
      background: transparent;
      color: var(--nova-text-main);
      border: 1px solid var(--nova-border);
    }

    .btn-outline:hover {
      background: #ffffff;
      box-shadow: 0 10px 25px rgba(15, 23, 42, 0.08);
      transform: translateY(-1px);
    }

    .btn-primary {
      background: var(--nova-teal);
      color: #ffffff;
      box-shadow: 0 16px 32px rgba(20, 184, 166, 0.45);
    }

    .btn-primary:hover {
      background: var(--nova-teal-dark);
      box-shadow: 0 18px 36px rgba(15, 118, 110, 0.5);
      transform: translateY(-1px);
    }

    .btn-primary:active,
    .btn-outline:active {
      transform: translateY(0);
      box-shadow: 0 10px 20px rgba(15, 23, 42, 0.16);
    }

    .chevron-left,
    .chevron-right {
      font-size: 1.1rem;
      line-height: 0;
    }

    .no-roles {
      margin-top: 22px;
      text-align: center;
      font-size: 0.9rem;
      color: var(--nova-text-muted);
    }
  </style>
</head>

<body>
  <main class="roles-page">
    <header class="roles-header">
      <div class="roles-step">Step 2 · Roles</div>
      <h1 class="roles-title">Roles That Fit Your Design</h1>
      <p class="roles-subtitle">
        Based on the traits and preferences you selected, here are roles where
        you are likely to thrive. Look for patterns in salary, outlook, and
        type of work that resonate with your story.
      </p>
    </header>

    <section id="rolesGrid" class="roles-grid" aria-label="Suggested roles">
      <!-- Cards will be injected here by JavaScript -->
    </section>

    <p id="noRolesMessage" class="no-roles" style="display:none;">
      We weren’t able to load any role matches yet. You can go back to adjust your
      traits, or continue forward and use this as a reflection point.
    </p>

    <nav class="roles-actions" aria-label="Roles navigation">
      <a href="traits.html" class="btn btn-outline">
        <span class="chevron-left">‹</span>
        <span>Back to Traits</span>
      </a>

      <a href="reveal.html" class="btn btn-primary">
        <span>Continue to Reveal</span>
        <span class="chevron-right">›</span>
      </a>
    </nav>
  </main>

  <script>
    // Default placeholder roles (used if nothing is in localStorage).
    const defaultRoles = [
      {
        title: "Operations & Process Improvement Lead",
        salary: "$80,000 – $120,000",
        outlook: "Faster than average",
        whyFit: "You thrive when making complex systems simpler, more efficient, and more humane.",
        traits: ["Analytical", "System Builder", "Problem Solver"]
      },
      {
        title: "Program / Project Manager",
        salary: "$75,000 – $115,000",
        outlook: "Steady demand",
        whyFit: "You enjoy coordinating people, timelines, and resources to bring ideas into reality.",
        traits: ["Organizer", "Communicator", "Finisher"]
      },
      {
        title: "People Development & Training Specialist",
        salary: "$65,000 – $100,000",
        outlook: "Growing",
        whyFit: "You carry a natural desire to teach, coach, and help others grow into their potential.",
        traits: ["Encourager", "Teacher", "Empathetic"]
      }
    ];

    function loadRoles() {
      let roles = null;

      // Try to pull from localStorage if your flow already saves it.
      const possibleKeys = ["novaRoles", "novaRoleMatches", "roleResults"];
      for (let key of possibleKeys) {
        const stored = localStorage.getItem(key);
        if (stored) {
          try {
            const parsed = JSON.parse(stored);
            if (Array.isArray(parsed) && parsed.length > 0) {
              roles = parsed;
              break;
            }
          } catch (e) {
            console.warn("Could not parse stored roles for key:", key, e);
          }
        }
      }

      if (!roles) {
        roles = defaultRoles;
      }

      const grid = document.getElementById("rolesGrid");
      const noRolesMsg = document.getElementById("noRolesMessage");

      if (!grid) return;

      if (!roles || roles.length === 0) {
        noRolesMsg.style.display = "block";
        return;
      }

      grid.innerHTML = "";

      roles.forEach((role) => {
        const card = document.createElement("article");
        card.className = "role-card";

        const nameEl = document.createElement("h2");
        nameEl.className = "role-name";
        nameEl.textContent = role.title || "Role";

        const metaRow = document.createElement("div");
        metaRow.className = "role-meta";

        if (role.salary) {
          const salaryPill = document.createElement("span");
          salaryPill.className = "role-pill";
          salaryPill.textContent = role.salary;
          metaRow.appendChild(salaryPill);
        }

        if (role.outlook) {
          const outlookPill = document.createElement("span");
          outlookPill.className = "role-pill outlook";
          outlookPill.textContent = role.outlook;
          metaRow.appendChild(outlookPill);
        }

        const summaryEl = document.createElement("p");
        summaryEl.className = "role-summary";
        summaryEl.textContent =
          role.whyFit ||
          "This role aligns with key traits you selected and the way you naturally show up.";

        card.appendChild(nameEl);
        card.appendChild(metaRow);
        card.appendChild(summaryEl);

        // Traits chips
        const traits = role.traits || role.keyTraits || [];
        if (traits && traits.length > 0) {
          const traitsLabel = document.createElement("div");
          traitsLabel.className = "role-traits-label";
          traitsLabel.textContent = "Why this fits you";

          const traitsRow = document.createElement("div");
          traitsRow.className = "role-traits";

          traits.forEach((t) => {
            const chip = document.createElement("span");
            chip.className = "role-trait-chip";
            chip.textContent = t;
            traitsRow.appendChild(chip);
          });

          card.appendChild(traitsLabel);
          card.appendChild(traitsRow);
        }

        grid.appendChild(card);
      });
    }

    document.addEventListener("DOMContentLoaded", loadRoles);
  </script>
</body>
</html>
